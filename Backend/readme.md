# Users API â€” POST /users/register

## ğŸ”§ Description
Create a new user account and return an authentication token.

- Endpoint URL: `/users/register`
- Method: `POST`

---

## ğŸ“‹ Headers
- `Content-Type: application/json`

---

## ğŸ§¾ Request body (JSON)
Required fields:

```json
{
  "fullname": {
    "firstName": "John",
    "lastName": "Doe"
  },
  "email": "john@example.com",
  "password": "s3cret"
}
```

- `fullname.firstName` (string) â€” required, minimum 3 characters
- `fullname.lastName` (string) â€” optional, minimum 3 characters if provided
- `email` (string) â€” required, must be a valid email address
- `password` (string) â€” required, minimum 6 characters

Validation is performed by `express-validator` and additional server-side checks may apply.

---

## âœ… Success response
- Status: `201 Created`
- Body:

```json
{
  "token": "<jwt-token>",
  "user": {
    "_id": "<user-id>",
    "fullname": {
      "firstName": "John",
      "lastName": "Doe"
    },
    "email": "john@example.com",
    "socketId": null
  }
}
```

Notes:
- The returned `token` is a JWT generated by `user.generateAuthToken()`.
- The `password` field is **not** returned.

---

## âš ï¸ Error responses
- `400 Bad Request` â€” validation errors. Response format is `{ errors: [ ... ] }` where each error contains `msg`, `param`, and `location`.

Example:
```json
{
  "errors": [
    { "msg": "Invalid email format", "param": "email", "location": "body" }
  ]
}
```

- `409 Conflict` â€” duplicate email (if the `email` already exists in the database).
- `500 Internal Server Error` â€” unexpected server error.

---

## Example curl
```bash
curl -X POST http://localhost:3000/users/register \
-H "Content-Type: application/json" \
-d '{"fullname": {"firstName": "John", "lastName": "Doe"}, "email": "john@example.com", "password": "s3cret"}'
```

---

## Notes
- Passwords are hashed before saving (see `user.model.js`).
- JWT signing relies on `process.env.JWT_SECRET`.
- Required server behavior: ensure database unique index on `email` to avoid duplicates.
